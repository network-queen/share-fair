spring:
  application:
    name: sharefair-api

  ai:
    ollama:
      base-url: ${SPRING_AI_OLLAMA_BASE_URL:http://localhost:11434}
      init:
        pull-model-strategy: when_missing
        timeout: 5m
      embedding:
        options:
          model: all-minilm:l6-v2

  datasource:
    url: jdbc:postgresql://localhost:5432/sharefair_db
    username: sharefair_user
    password: sharefair_password
    driver-class-name: org.postgresql.Driver

  jpa:
    properties:
      hibernate:
        dialect: org.hibernate.dialect.PostgreSQLDialect

  flyway:
    locations: classpath:db/migration
    baseline-on-migrate: true
    enabled: true

  mail:
    host: ${MAIL_HOST:smtp.gmail.com}
    port: ${MAIL_PORT:587}
    username: ${MAIL_USERNAME:}
    password: ${MAIL_PASSWORD:}
    properties:
      mail:
        smtp:
          auth: true
          starttls:
            enable: true

  thymeleaf:
    prefix: classpath:/templates/
    suffix: .html
    mode: HTML
    check-template-location: false

  servlet:
    multipart:
      max-file-size: 10MB
      max-request-size: 50MB

server:
  port: 8080
  servlet:
    context-path: /

logging:
  level:
    root: INFO
    com.sharefair: DEBUG
    org.springframework.security: DEBUG

jwt:
  secret: ${JWT_SECRET:sharefair-dev-secret-key-min-256-bits-change-in-production-env}
  expiration: 3600000 # 1 hour
  refresh-expiration: 604800000 # 7 days

oauth:
  google:
    client-id: ${GOOGLE_CLIENT_ID:}
    client-secret: ${GOOGLE_CLIENT_SECRET:}
  github:
    client-id: ${GITHUB_CLIENT_ID:}
    client-secret: ${GITHUB_CLIENT_SECRET:}

frontend:
  url: ${FRONTEND_URL:http://localhost:5173}

stripe:
  secret-key: ${STRIPE_SECRET_KEY:}
  publishable-key: ${STRIPE_PUBLISHABLE_KEY:}
  webhook-secret: ${STRIPE_WEBHOOK_SECRET:}

minio:
  endpoint: ${MINIO_ENDPOINT:http://localhost:9000}
  access-key: ${MINIO_ACCESS_KEY:sharefair}
  secret-key: ${MINIO_SECRET_KEY:sharefair123}
  bucket: ${MINIO_BUCKET:sharefair-images}

sharefair:
  embedding:
    similarity-threshold: ${EMBEDDING_SIMILARITY_THRESHOLD:0.8}
  email:
    enabled: ${EMAIL_ENABLED:false}
